module.exports=[32245,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(41997);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},7773,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},97458,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(35112),f=a.r(56704),g=a.r(7773);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},69853,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(87924),e=a.r(72131),f=a.r(32245),g=a.r(97458);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},19721,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(33354)._(a.r(69853));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},21476,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(70106);let e=(0,d.default)("person-standing",[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]]),f=(0,d.default)("bike",[["circle",{cx:"18.5",cy:"17.5",r:"3.5",key:"15x4ox"}],["circle",{cx:"5.5",cy:"17.5",r:"3.5",key:"1noe27"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["path",{d:"M12 17.5V14l-3-3 4-3 2 3h2",key:"1npguv"}]]),g=(0,d.default)("car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);var h=a.i(38246),i=a.i(71987);let j=[{key:"walk",icon:e},{key:"bicycle",icon:f},{key:"drive",icon:g}];function k({address:a,radius:c,setRadius:d,routeInfo:e,onChangeMode:f,onClearRoute:g}){return(0,b.jsxs)("div",{className:"absolute top-0 z-[1000] w-full",children:[(0,b.jsxs)("div",{className:"backdrop-blur p-4 shadow-sm",children:[(0,b.jsx)(h.default,{href:"/",className:"flex items-center",children:(0,b.jsx)(i.default,{src:"/logo.png",alt:"Ushalli Logo",width:85,height:85,priority:!0})}),(0,b.jsxs)("div",{className:"bg-gray-100 rounded-2xl px-4 py-4 mt-2",children:[(0,b.jsx)("div",{className:"text-[11px] text-gray-500",children:"Lokasi Anda"}),(0,b.jsx)("div",{className:"text-sm font-medium text-gray-800 truncate",children:a})]}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-[11px] text-gray-500 mb-1",children:[(0,b.jsx)("span",{children:"Radius"}),(0,b.jsxs)("span",{children:[c," m"]})]}),(0,b.jsx)("input",{type:"range",min:500,max:5e3,step:100,value:c,onChange:a=>d(Number(a.target.value)),className:" w-full h-1 bg-transparent accent-royal cursor-pointer ",style:{accentColor:"var(--color-royal)"}})]})]}),e&&(0,b.jsx)("div",{className:"flex gap-3 mt-2 items-center px-3",children:j.map(a=>{let c=e.mode===a.key,d=a.icon;return(0,b.jsx)("button",{onClick:()=>f(a.key),title:a.key,className:`
                  flex items-center justify-center
                  w-11 h-11 rounded-xl border transition
                  cursor-pointer
                  ${c?"bg-[var(--color-royal)] text-white shadow":"bg-white text-gray-700"}
                `,children:(0,b.jsx)(d,{size:22,strokeWidth:2.5})},a.key)})})]})}let l="c9c35fe3d6384c429d486f408b5f4c6d";async function m({lat:a,lon:b,radius:c}){let d=`https://api.geoapify.com/v2/places?categories=religion.place_of_worship.islam&filter=circle:${b},${a},${c}&limit=50&apiKey=${l}`,e=await fetch(d);return(await e.json()).features.map(a=>({id:a.properties.place_id,name:a.properties.name||"Masjid",address:a.properties.address_line2||a.properties.address_line1||"",position:[a.geometry.coordinates[1],a.geometry.coordinates[0]]}))}async function n({from:a,to:b,mode:c}){let d=`https://api.geoapify.com/v1/routing?waypoints=${a.lat},${a.lon}|${b[0]},${b[1]}&mode=${c}&apiKey=${l}`,e=await fetch(d),f=await e.json();if(!f.features?.length)throw Error("Routing data not found");let g=f.features[0].geometry,h=[];return"LineString"===g.type&&(h=g.coordinates.map(a=>[a[1],a[0]])),"MultiLineString"===g.type&&(h=g.coordinates.flat().map(a=>[a[1],a[0]])),{coords:h,info:{distance:f.features[0].properties.distance,time:Math.round(f.features[0].properties.time/60),mode:c}}}var o=a.i(69452);function p(a,b){if(!a||!b)return 0;let c=a.lat,d=a.lon,e=b[0],f=b[1];if("number"!=typeof c||"number"!=typeof d||"number"!=typeof e||"number"!=typeof f)return 0;let g=a=>a*Math.PI/180,h=g(e-c),i=g(f-d),j=Math.sin(h/2)**2+Math.cos(g(c))*Math.cos(g(e))*Math.sin(i/2)**2;return 12742e3*Math.atan2(Math.sqrt(j),Math.sqrt(1-j))}let q=(0,a.i(19721).default)(async()=>{},{loadableGenerated:{modules:[1995]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:"Memuat peta..."})});function r({mosque:a,routeInfo:c,onRoute:d,onCancel:e}){let f=!!a,g=!!c;return(0,b.jsx)("div",{className:`
        fixed bottom-0 left-0 right-0 z-[1000]
        transition-all duration-300 ease-out
        ${f?"translate-y-0 opacity-100":"translate-y-full opacity-0"}
        pointer-events-${f?"auto":"none"}
      `,children:(0,b.jsx)("div",{className:" bg-white rounded-3xl shadow-2xl px-5 py-4 md:max-w-[80%] w-[98%] mb-2 mx-auto ",children:(0,b.jsxs)("div",{className:"flex justify-between items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-base font-semibold text-gray-900 leading-tight",children:a?.name}),!g&&(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500 leading-snug",children:a?.address}),g&&c&&(0,b.jsxs)("div",{className:"mt-3 text-sm text-gray-700 space-y-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Jarak:"}),(0,b.jsx)("span",{className:"font-medium",children:c.distance>=1e3?(c.distance/1e3).toFixed(1)+" km":c.distance+" m"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Estimasi:"}),(0,b.jsxs)("span",{className:"font-medium",children:[c.time," menit"]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[!g&&(0,b.jsx)("button",{onClick:()=>d(a.position,"bicycle"),className:" px-4 py-2 rounded-xl text-sm font-medium bg-blue-600 text-white hover:bg-blue-700 transition cursor-pointer ",children:"Pilih Rute"}),(0,b.jsx)("button",{onClick:e,className:" px-4 py-2 rounded-xl text-sm font-medium border text-white hover:bg-red-800 bg-red-700 transition cursor-pointer ",children:"Batal"})]})]})})})}var s=a.i(75849);function t(){let{coords:a,address:d}=(0,o.useLocationContext)(),[e,f]=(0,c.useState)(2e3),g=function(a,b){let[d,e]=(0,c.useState)([]);return(0,c.useEffect)(()=>{a&&m({lat:a.lat,lon:a.lon,radius:b}).then(e)},[a,b]),d}(a,e),{route:h,routeInfo:i,routeTo:j,clearRoute:l,isLoading:t,lastOrigin:u}=function(a){let[b,d]=(0,c.useState)(null),[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(null);return{route:b,routeInfo:e,routeTo:async(b,c)=>{if(a){h(!0);try{let e=await n({from:a,to:b,mode:c});d(e.coords),f(e.info),j(a)}catch(a){console.error("Failed to fetch route:",a)}finally{h(!1)}}},clearRoute:()=>{d(null),f(null),j(null),h(!1)},isLoading:g,lastOrigin:i}}(a),[v,w]=(0,c.useState)(null);(0,c.useEffect)(()=>{h&&i&&v&&a&&!t&&!(u&&20>p(u,[a.lat,a.lon]))&&function(a,b){if(!a||!b)return 1/0;let c=1/0;for(let[d,e]of a){let a=p(b,[d,e]);a<c&&(c=a)}return c}(h,a)>40&&j(v.position,i.mode)},[a,h,i,v,t,u]);let x=(0,c.useMemo)(()=>{if(!h||!a)return h;let b=function(a,b){if(!a||0===a.length||!b)return 0;let c=1/0,d=0;for(let e=0;e<a.length;e++){let f=a[e][0]-b.lat,g=a[e][1]-b.lon,h=f*f+g*g;h<c&&(c=h,d=e)}return d}(h,a);return h.slice(Math.max(0,b))},[h,a]),y=(0,c.useMemo)(()=>{if(!i||!v||!a||!h)return null;let b=0;for(let a=1;a<x.length;a++){let[c,d]=x[a-1],[e,f]=x[a];b+=p({lat:c,lon:d},[e,f])}let c={walk:80,bicycle:250,drive:600},d=c[i.mode]||c.bicycle;return{...i,distance:Math.round(b),time:b>0?Math.max(1,Math.round(b/d)):null}},[i,v,a,x]),z=()=>{l(),w(null)},A=i&&v?[v]:g;return(0,b.jsxs)("div",{className:"relative h-screen w-full",children:[(0,b.jsx)(k,{address:d,radius:e,setRadius:f,routeInfo:i,onClearRoute:z,onChangeMode:a=>{v&&j(v.position,a)}}),(0,b.jsx)(q,{userPos:a,radius:e,mosques:A,route:x,onRoute:j,isRouting:!!i,onSelectMosque:w,selectedMosque:v}),(0,b.jsx)(r,{mosque:v,routeInfo:y,onRoute:j,onCancel:z}),(0,b.jsx)(s.default,{visible:!v})]})}a.s(["default",()=>t],21476)}];

//# sourceMappingURL=_cecef7ca._.js.map